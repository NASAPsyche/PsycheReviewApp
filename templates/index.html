{% extends "base.html" %}

{% block head %}
<title>Index</title>
<style>
body {
  background-color: #f47c33;
}

.tblItems {
  max-height: auto;
}

.table-row {
  border-top: solid black;
  border-bottom: solid black;
}
.modalImgCSS {
  max-height: auto;
  width: 800px;
}

.modal-dialog {
  vertical-align: center;
 
}
.modal-body{
  padding: 0;
}
.modal-content {
  background-color: white;
  border: 0px;
 
}

.video {
  
  height: 300px;
}

.pdf {
  
  height: 350px;
}


.pdfButton {
  display: block;
  position: relative;
  margin-top: 10px;
}

.set {
  width: 30px;
  height: 30px;
}

.center {
    text-align: center;
    vertical-align: middle;
}

.alert {
  margin-bottom: 0px;
  padding: 6px 12px 6px 12px;
}

[type=reset], [type=submit], button, html [type=button] {
    -webkit-appearance: none;
}

.view-sub {
  color: white;
}

.no-js #loader { display: none;  }
.js #loader { display: block; position: absolute; left: 100px; top: 0; }
.se-pre-con {
    position: fixed;
    left: 0px;
    top: 0px;
    width: 100%;
    height: 100%;
    z-index: 9999;
    background: url(https://j2n9a3i8.stackpathcdn.com/wp-content/uploads/2014/08/Preloader_10.gif) center no-repeat #fff;
}

.copyright, .rights {
 color: #fff;
}


.grad {
    background-image: linear-gradient(to bottom right, red, yellow);
}

</style>
{% endblock %}

{% block scripts %}
<script>
$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};

// show loading indicator while page loads
$(window).on('load', function() {
        // Animate loader off screen
        $(".se-pre-con").fadeOut("slow");
    });

$(document).ready(function() {
  $('#all').prop("disabled", false);
  $('#selected').prop("disabled", false);
  $('#submit').prop("disabled", false);
  $('#sheets').prop("disabled", true);

  $.get($SCRIPT_ROOT + '/sheets', function(response){
  });
});
$(document).on('click', '#selected', function() {
  var selected = []
  $('.set:checked').each(function() {
      selected.push($(this).attr('value'));
  });
  $('#all').prop("disabled", false);
  $('#selected').prop("disabled", true);
  $('#submit').prop("disabled", false);
  $('#sheets').prop("disabled", false);
  $.get($SCRIPT_ROOT + '/selected', {
    rows: JSON.stringify(selected)
  }, function(data) {
    $("#table").html(data.result);
  });
});

$(document).on('click', '#all', function() {
  $('#all').prop("disabled", true);
  $('#selected').prop("disabled", false);
  $('#submit').prop("disabled", true);
  $('#sheets').prop("disabled", false);
  $.get($SCRIPT_ROOT + '/all', {
  }, function(data) {
    $("#table").html(data.result);
  });
});

$(document).on('click', '.modalImg', function() {
  $(".modal-body").html($(this).html())
  $(".modal-body img").removeClass("tblItems");
  $(".modal-body img").addClass("modalImgCSS");
});

$(document).on('click', '.modalImgCSS', function() {
  $('#selectedImg').modal('toggle')
});

$(document).on('click', '#submit', function() {
  var favs = [];
  token = $('#token').val();
  $('.set:checked').each(function() {
      favs.push($(this).attr('value'));
  });
  
  $.get($SCRIPT_ROOT + '/submit', {
    favs: JSON.stringify(favs),
    token: token
  }, function(data) {
    $("#notif").html(data.result);
  });
});

$('.view-sub').click(function(e) {
    e.preventDefault();  //stop the browser from following
    window.location.href = 'static/reviews.txt';
});



</script>
{% endblock %}

{% block navItemsRight %}
<li id="notif">
  <!-- -->
</li>
<li>
  <div class="input-group" style="margin-bottom: 10px; margin-top: 10px;">
    <input type="text" class="form-control" placeholder="Please insert your ID token" aria-label="token" aria-describedby="token" id="token" required>
    <div class="input-group-append">
      <button class="btn btn-dark" type="button" id="submit" disabled>Submit</button>
    </div>
    <!-- <div class="input-group-append">
      <button class="btn btn-primary" type="button" >
          <a  class="view-sub" href="no-script.html">View Submissions</a>
      </button>
    </div> -->
</li>

{% endblock %}

{% block body %}

    {% for item in data %}
    <div class="card bg-{{item['color']}}" style="padding: 16px; margin: 8px;">
      <div id="checkbox">
        <input type="checkbox" class="center set" value="{{item['first'] + ' ' + item['last']}}" style="width: 32px; height: 32px; margin-bottom: 10px;">
      </div>
      <div id="row" class="row">
            {% if 'audrey' not in item['first']  and 'Test' not in item['first'] and 'First' not in item['first'] %}
            {% for element in item['sample'] %}
            <div id="col" class="col-lg-4 col-md-6 col-sm-12" style="margin-bottom: 10px;">
              <div class="card">
                {% if element['video'] != "" and 'youtube' in element['video'] or 'vimeo' in element['video']%}
                  <div class="embed-responsive embed-responsive-1by1">
                      <iframe class="embed-responsive-item" src="{{element['video']}}"></iframe>
                  </div>   
                  <div class="card-body">
                    <h5 class="card-title">Artwork Description</h5>
                    <p class="card-text" style="text-align: justify;">{{element['desc']}}</p>
                    <a href="{{element['video']}}" class="btn btn-{{item['color']}}" target="_blank">Open in new Tab</a>
                  </div>  
                {% endif %}
                {% if 'open.spotify.com' in element['video'] and element['video'] != "" %}
                  <div class="embed-responsive embed-responsive-1by1">
                      <iframe class="embed-responsive-item" src="{{element['video']}}"></iframe>
                  </div> 
                  <div class="card-body">
                    <h5 class="card-title">Artwork Description</h5>
                    <p class="card-text" style="text-align: justify;">{{element['desc']}}</p>
                    <a href="{{element['video']}}" class="btn btn-{{item['color']}}" target="_blank">Click to view on Spotify</a>
                  </div>  
                {% endif %}
                {% if '.png' in element['image'] or '.jpg' in element['image'] or '.jpeg' in element['image'] or '.tif' in element['image'] or '.gif' in element['image'] or '.PNG' in element['image'] or '.JPG' in element['image'] or '.JPEG' in element['image'] or '.TIF' in element['image'] or '.GIF' in element['image'] %}
                <button class="btn btn-default modalImg" data-toggle="modal" data-target="#selectedImg">
                  <img src="{{element['image']}}" class="card-img-top" alt="..." style="padding-top: 10px;">
                </button>
                  <div class="card-body">
                    <h5 class="card-title">Artwork Description</h5>
                    <p class="card-text" style="text-align: justify;">{{element['desc']}}</p>
                    <a href="{{element['image']}}" class="btn btn-{{item['color']}}" target="_blank">Open in new Tab</a>
                  </div>
                
                {% endif %}
                {% if '.pdf' in element['image'] or '.PDF' in element['image'] %}
                  <div class="embed-responsive embed-responsive-1by1">
                      <iframe class="embed-responsive-item" src="{{element['image']}}"></iframe>
                  </div> 
                  <div class="card-body">
                    <h5 class="card-title">Artwork Description</h5>
                    <p class="card-text" style="text-align: justify;">{{element['desc']}}</p>
                    <a href="{{element['image']}}" class="btn btn-{{item['color']}}" target="_blank">Open in new Tab</a>
                  </div>
  
                {% endif %}
              </div>
            </div>
            {% endfor %}
            {% endif %}
      </div>
    </div>
    {% endfor %}

<div class="modal fade" id="selectedImg" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="false">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <!-- Generated by Jquery for each image -->
      </div>
    </div>
  </div>
</div>
<div class=""><footer class="page-footer font-small pt-4">
  <!-- Copyright -->
  <div class="footer-copyright text-center py-3 copyright" >Â© NASA Mission to Psyche 2020 :
    <a class="rights" href="https://psyche.asu.edu/"> All Rights Reserved</a>
  </div>
  <!-- Copyright -->
</footer></div>
<div class="se-pre-con"></div>
{% endblock %}

{% block footer %}
<!-- Footer -->

 <!-- Footer -->
{% endblock %}